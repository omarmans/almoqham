<section class="testimonials-section">
  <div class="main-cont">
    <h2 class="section-title">تقييمات من عملائنا</h2>

    <div class="testimonials-wrapper">
      <button
        class="nav-btn prev-btn"
        (click)="prevSlide()"
        aria-label="Previous"
      >
        <i class="fa-solid fa-chevron-right"></i>
      </button>

      <div class="slider-container">
        <div class="slider-track" [style.transform]="getTransformDirection()">
          <!-- [style.transform]="'translateX(' + currentSlide() * -100 + '%)'" -->
          @for (testimonial of testimonials(); track testimonial.id) {
          <div class="testimonial-slide">
            <div class="testimonial-card">
              <div class="client-image">
                <img src="imgs/client.webp" alt="Client" />
              </div>
              <h3 class="client-name">{{ testimonial.name }}</h3>
              <p class="client-location">{{ testimonial.location }}</p>
              <div class="rating">
                @for (star of getRatingArray(); track $index) {
                <i class="fa-solid fa-star"></i>
                }
              </div>
              <p class="testimonial-text">{{ testimonial.text }}</p>
            </div>
          </div>
          }
        </div>
      </div>

      <button class="nav-btn next-btn" (click)="nextSlide()" aria-label="Next">
        <i class="fa-solid fa-chevron-left"></i>
      </button>
    </div>

    <div class="custom-pagination">
      @for (testimonial of testimonials(); track testimonial.id; let i = $index)
      {
      <button
        class="dot"
        [class.active]="i === currentSlide()"
        (click)="goToSlide(i)"
        [attr.aria-label]="'Go to slide ' + (i + 1)"
      ></button>
      }
    </div>
  </div>
</section>
